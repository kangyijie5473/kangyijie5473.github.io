---
layout: post
title: "批量数据导入Redis（Mass Insertion）"
date: 2017-07-18
---

##### 前言


一觉醒来改好bug的感觉真爽，可惜周围小伙伴都睡了，不能让我欢呼雀跃一下。


#### 正文


本篇主要通过一个典型的K—V批量数据导入例子来总结redis的数据导入过程，同时穿插了一些格式化数据的处理方式。


#### 需求


我的项目需要将 ‘英文单词’ – ‘汉译’ 以K-V的形式保存在redis中，然后进行查询功能，这里就采用了Redis的批量导入功能。


#### 笨方法


如果在客户端，我们想要插入一条数据，就直接做就好


```
SET key value
```


然而当遇到成千上万条呢？


我自己想到的笨方法就是写个循环呗。。。让程序自己跑。。但是既然有更高效和简单的办法，为什么不用呢？


#### 优雅的方法


从Redis2.6开始，redis-cli支持使用pipe模式插入大量数据。我们只需要将数据格式化、协议化便可以简单高效的完成批量插入。如下，将数据处理之后保存在文件file，只需要


```
$ cat file | redis-cli --pipe
```


就完成了


#### 格式化数据


我们将需要的
