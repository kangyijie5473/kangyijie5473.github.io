---
layout: post
title: 一个有趣的程序——可以打印自己第N行代码的程序
date: 2017-03-01
---

#### 程序要求


输入一个整数N，范围是大于0，小于程序源文件总代码行数，要求输出打印第N行的代码内容，不能打开源文件（open或者fopen都不可以），源代码行数大于1.


#### 思路


当源代码编译成可执行文件之后，如果不打开源文件，必然是看不到源文件的内容的，那么我们就将源文件中的内容保存到可执行文件里，比如将代码作为字符串存储。


#### 问题–如何保存


我一开始用C中的char *str[]指针数组来保存的，然后就发现了问题，每一行代码作为一个字符串都需要用一行代码来记录保存，这样就形成了死循环，都写在一行呢？但是这样当前行的代码由哪来存呢？示例代码


```
#include<stdio.h>
int main(void){
    int n;
    char *str[7]={"#include<stdio.h>","int main(void){","int n;","scanf(\"%d\",&n);","printf(\"%s\n\",str[n-1]);}"} //尴尬的无法保存自己 有种要哆啦A梦口袋自己装自己的感觉
    scanf("%d",&n);
    if(n == 4) printf("char *str[6]=%s")
    printf("%s\n",str[n-1]);
}
```


#### 实现（python）


```
li = ['n = int(raw_input())', 'if n == 1:', '   print"li = ",li', 'else:','   print li[n-2]'];
n = int(raw_input());
if n == 1:
    print"li = ",li;
else:
    print li[n-2];
```


#### 效果

#### 结语


不知道其他语言的实现，只是在这里给出大神的解答，感觉程序很有意思。
