---
layout: post
title: 【真香】一个C++后台的SSM总结
date: 2019-04-02
---

#### 前言


看到群博上大家积极的更新博客，惭愧的自己，康康啊康康，怎么能堕落呢。赶紧写博客啊。


老早就知道Spring-SpringMVC-Mybatis的大名了，甚至在小伙伴面试时也了解了一下session/cookie的相关知识，但是一直没有机会自己动手实践一下，感谢母校给了我这样一个宝贵的机会，让我在毕业前真正体验了一把Java web开发的感觉。


作为一个C++后台，一直对这些东西都没什么理解。


师兄说：“想的通，写不通，还是空。”对我来说，如果想都想不通，那不如先写写，写着写着，可能也就想通了。


不得不说，真正写了一周项目后，我的感受就一个。


## 真香！


#### 至于原因嘛


先立个FLAG，我先去学车，放假了补上。（科三过了ohohoh）我觉得最大的两个好处1.方便开发，大大的提升了开发效率2.架构思路清晰，可以说遵循框架的架构设计，让整个项目的架构简洁，美观，可扩展性非常强。


#### 本文的目的


网上SSM的资料超级多，而我这篇文章的目的并不是一篇正统的SSM科普文，想要系统学习Java Web的同学可以点击x了。这只是自己从一个Java web 0基础小白的总结文，其中概念叙述并不是很正确（并没有认真看书学习）。如果你也是需要快速实现一个小项目，或者带着好奇的心态想看看web开发是啥（当然你需要有一定的其他开发的基础），这篇文章可以让你快速入门。


#### 正文


##### 开发环境


便于操作，开发环境为Linux + IDEA。IDEA可以说是新手的必备了，一个很重要的tip：IDEA没自动补全的，估计就是你写错了。而Linux则是因为这是我更加熟悉的开发环境。


而IDEA，java环境啥的，请自己准备吧。同时，为了减少学习知识，我采用了手动导jar包，而并没有使用Maven（怎么简单怎么来，Yeah）。


##### 总体架构


我的项目采用的是前后端分离架构，所以总结的是纯后端，并不会操心前端的事。要做的只是接受参数，处理业务->操作数据库，然后将结果以JSON的格式返回。


而到代码层面，则分为Entity，DAO，Service，Crontroller四层。Entity,实体类，每个实体对应数据库里的一张表。DAO，这个类都是抽象类，表示一个实体对数据库的操作。Service，感觉是对DAO层的一次封装，提供服务给更上层的CrontrollerCrontroller，实现业务逻辑的地方，调用Service提供的服务。


##### 开发流程


1.设计数据库这就是按照业务去设计数据库，建表。以一个简单的用户表User为例，包含三个字段id（自增主键），name（姓名），passwd（密码）。2.编写Entity类每张表对应一个实体类，把表中的字段写成类的属性，然后自动生成getter-setter方法。


对应User表的User类


```
public class User {
   
   
    private int id;
    private String name;
    private String passwd;

    public int getId() {
   
   
        return id;
    }

    public void setId(int id) {
   
   
        this.id = id;
    }

    public String getName() {
   
   
        return name;
    }

    public void setName(String name) {
   
   
        this.name = name;
    }

    public String getPasswd() {
   
   
        return passwd;
    }

    public void setPasswd(String passwd) {
   
   
        this.passwd = passwd;
    }
}
```


3.编写DAO层还是以User为例，分为一个抽象类和一个xml文件。抽象类定义接口，xml按照mybatis的语（zi）法（dong）编（bu）写（quan）。


```
public interface UserDAO {
   
   
    public User queryUserByName(String name);
    public int insertUser(User user);
    public List<User> display();
}
```


```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.UserDAO">

    <select id="queryUserByName" resultType="entity.User">
        select * from User where name=#{name};
    </select>

    <insert id="insertUser" keyProperty="id" useGeneratedKeys="true" parameterType="entity.User">
        insert into User(name, passwd) values(#{name}, #{passwd});
    </insert>
    <select id="display" resultType="entity.User">
        select * from User;
    </select>

</mapper>
```


简单说，MyBatis就是将SQL语句转换为成了一个接口，这样我们就不用再像原来那样使用比较原始的方式操作数据库了。上面的三个接口可以说非常有代表性了。1.#{}指定参数，很神奇的是MyBatis可以“智能”地找到需要的参数。2.插入时指定了自增主键3.返回List<User>，但resultType依然是User。


当然，DAO涉及到数据库，我们还需要一
