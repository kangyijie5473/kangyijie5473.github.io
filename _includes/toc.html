<!-- _includes/toc.html -->
{% comment %} æå–æ–‡ç« ä¸­çš„ H1-H6 æ ‡é¢˜ï¼Œç”Ÿæˆç›®å½• {% endcomment %}
{% assign content_with_ids = content %}
{% assign headings = content | split: '<h' %}
{% assign toc_list = '' | split: '' %}

{% for heading in headings %}
  {% if heading != '' %}
    {% assign level = heading | slice: 0, 1 | plus: 0 %}
    {% if level >= 1 and level <= 6 %}
      {% assign heading_parts = heading | split: '>' %}
      {% assign title = heading_parts[1] | split: '</h' | first | strip_html %}
      {% assign slug = title | slugify %} <!-- ç”Ÿæˆé”šç‚¹IDï¼ˆå’ŒJekyllé»˜è®¤ä¸€è‡´ï¼‰ -->
      
      {% if title != '' %}
        {% assign toc_item = {
          "level": level,
          "title": title,
          "slug": slug
        } %}
        {% assign toc_list = toc_list | push: toc_item %}
      {% endif %}
    {% endif %}
  {% endif %}
{% endfor %}

{% comment %} åªæœ‰å­˜åœ¨æ ‡é¢˜æ—¶æ‰æ˜¾ç¤ºç›®å½• {% endcomment %}
{% if toc_list.size > 0 %}
  <div class="toc-container">
    <h3 class="toc-title">ğŸ“‹ æ–‡ç« ç›®å½•</h3>
    <ul class="toc-list">
      {% for item in toc_list %}
        <li class="toc-item toc-level-{{ item.level }}">
          <a href="#{{ item.slug }}" class="toc-link">{{ item.title }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}